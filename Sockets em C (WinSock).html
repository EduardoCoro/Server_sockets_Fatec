
<!-- saved from url=(0055)http://www.professordiovani.com.br/sd/Sockets_cplus.htm -->
<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns="http://www.w3.org/TR/REC-html40"><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">

<meta name="ProgId" content="Word.Document">
<meta name="Generator" content="Microsoft Word 11">
<meta name="Originator" content="Microsoft Word 11">
<link rel="File-List" href="http://www.professordiovani.com.br/sd/Sockets_cplus_arquivos/filelist.xml">
<title>Sockets em C (WinSock)</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Diovani</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>Diovani</o:LastAuthor>
  <o:Revision>1</o:Revision>
  <o:TotalTime>1</o:TotalTime>
  <o:Created>2010-02-26T17:27:00Z</o:Created>
  <o:LastSaved>2010-02-26T17:28:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>3076</o:Words>
  <o:Characters>16612</o:Characters>
  <o:Company>Home</o:Company>
  <o:Lines>138</o:Lines>
  <o:Paragraphs>39</o:Paragraphs>
  <o:CharactersWithSpaces>19649</o:CharactersWithSpaces>
  <o:Version>11.5606</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:HyphenationZone>21</w:HyphenationZone>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:536871559 0 0 0 415 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h3
	{mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:3;
	font-size:13.5pt;
	font-family:"Times New Roman";
	font-weight:bold;}
h4
	{mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:4;
	font-size:12.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
p
	{mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
pre
	{margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";}
span.apple-style-span
	{mso-style-name:apple-style-span;}
span.apple-converted-space
	{mso-style-name:apple-converted-space;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:70.85pt 3.0cm 70.85pt 3.0cm;
	mso-header-margin:35.4pt;
	mso-footer-margin:35.4pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:420033846;
	mso-list-template-ids:818941736;}
@list l1
	{mso-list-id:918516670;
	mso-list-template-ids:1040731364;}
@list l2
	{mso-list-id:1054280564;
	mso-list-template-ids:2022688;}
@list l3
	{mso-list-id:1247301869;
	mso-list-template-ids:-1836138904;}
@list l4
	{mso-list-id:1368337147;
	mso-list-template-ids:1480889342;}
@list l5
	{mso-list-id:1481728289;
	mso-list-template-ids:405977296;}
@list l6
	{mso-list-id:1499617929;
	mso-list-template-ids:359180574;}
@list l7
	{mso-list-id:1700201181;
	mso-list-template-ids:-115820738;}
@list l8
	{mso-list-id:1734544350;
	mso-list-template-ids:217637618;}
@list l9
	{mso-list-id:1829906503;
	mso-list-template-ids:-1300362600;}
@list l10
	{mso-list-id:1851990624;
	mso-list-template-ids:3713592;}
@list l11
	{mso-list-id:1852602393;
	mso-list-template-ids:1849832832;}
@list l12
	{mso-list-id:2002461950;
	mso-list-template-ids:-930572954;}
@list l13
	{mso-list-id:2064326528;
	mso-list-template-ids:1998076014;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Tabela normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]-->
</head>

<body lang="PT-BR" link="blue" vlink="blue" style="tab-interval:35.4pt">

<div class="Section1">

<h3 style="margin:0cm;margin-bottom:.0001pt;line-height:15.0pt;background:#F3F3F3"><span style="font-size:15.0pt;font-family:&quot;Trebuchet MS&quot;;mso-bidi-font-family:Arial;
color:#333333"><a href="http://blog.stiod.com/2007/09/10/sockets-em-c-winsock/" title="Permanent Link to Sockets em C (WinSock)"><span style="color:#498F9E;
text-decoration:none;text-underline:none">Sockets em C (WinSock)</span></a><o:p></o:p></span></h3>

<p class="MsoNormal" style="line-height:13.5pt;background:#F3F3F3"><span style="font-size:8.5pt;font-family:Arial;color:#7D0047">Postado por<span class="apple-converted-space">&nbsp;</span><b>Yoshio Iwamoto</b><span class="apple-converted-space">&nbsp;</span>em<span class="apple-converted-space">&nbsp;</span><b>10/09/2007</b><o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Um socket é um mecanismo de
comunicação que permite que dois ou mais aplicativos troquem informações, seja
no mesmo computador ou em computadores distintos, como os programas de chats,
games on-line, navegadores, etc. No geral, programas que utilizam<span class="apple-converted-space">&nbsp;</span><em><span style="font-family:Verdana;
mso-bidi-font-family:Arial">Network Communication</span></em><span class="apple-converted-space">&nbsp;</span>ou<em><span style="font-family:Verdana;
mso-bidi-font-family:Arial">Interprocess Communication</span></em><span class="apple-converted-space">&nbsp;</span>utilizam sockets.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Sockets são importantes, por isso eu
tinha que tomar vergonha na cara e aprender a usá-los, comecei a ler sobre o
assunto e consegui fazer uma pequena aplicação que envia mensagens para outra.<br>
<br>
<span id="more-33"></span>Primeiramente vou mostrar o código e depois ir
(tentando) descrever as funções. Não vou me aprofundar, é só para ter uma idéia
de como a coisa funciona, mesmo porque eu acho que aprofundei demais na
explicação (mas quanto mais se sabe, mas se sabe que não se sabe nada XD).<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O código foi feito para Windows, mas
a implementação no Linux é bem parecida. No Windows você deve usar a<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">WinSock API</span></strong><span class="apple-converted-space">&nbsp;</span>para trabalhar com sockets, não se
esqueça de linkar a lib na hora de compilar. Eu uso o Dev-C++ e a lib é a<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">libwsock32.a</span></strong>.<o:p></o:p></span></p>

<h3 style="margin:0cm;margin-bottom:.0001pt;line-height:13.5pt;background:#F3F3F3"><span style="font-family:&quot;Trebuchet MS&quot;;mso-bidi-font-family:Arial;color:#333333">Criando
o servidor que recebe mensagens<o:p></o:p></span></h3>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<div style="mso-element:para-border-div;border:solid #CCDBE6 1.0pt;mso-border-alt:
solid #CCDBE6 .75pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;background:#EDF2F6;
margin-left:6.0pt;margin-right:24.0pt"><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt;overflow-x: auto;overflow-y: auto"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><i><span style="color:gray">/*</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><i><span style="color:gray">&nbsp;<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>SERVIDOR</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><i><span style="color:gray">*/</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#339933">#include &lt;stdio.h&gt;</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#339933">#include &lt;stdlib.h&gt;</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#339933">#include &lt;string.h&gt;</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#339933">#include &lt;winsock.h&gt;</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">9.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">10.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#339933">#define BACKLOG_MAX 5</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">11.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#339933">#define BUFFER_SIZE 128</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">12.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#339933">#define EXIT_CALL_STRING "#quit"</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">13.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">14.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">int</span><span style="color:black"> local_socket = </span><span style="color:#CC66CC">0</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">15.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">int</span><span style="color:black"> remote_socket = </span><span style="color:#CC66CC">0</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">16.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">17.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">int</span><span style="color:black"> remote_length = </span><span style="color:#CC66CC">0</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">18.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">int</span><span style="color:black"> message_length = </span><span style="color:#CC66CC">0</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">19.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">20.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">unsigned</span><span style="color:black"> </span><span style="color:#993333">short</span><span style="color:black"> local_port = </span><span style="color:#CC66CC">0</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">21.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">unsigned</span><span style="color:black"> </span><span style="color:#993333">short</span><span style="color:black"> remote_port = </span><span style="color:#CC66CC">0</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">22.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">23.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">char</span><span style="color:black"> message</span><span style="color:#66CC66">[</span><span style="color:black">BUFFER_SIZE</span><span style="color:#66CC66">]</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">24.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">25.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">struct</span><span style="color:black"> sockaddr_in local_address;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">26.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">struct</span><span style="color:black"> sockaddr_in remote_address;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">27.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">28.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">WSADATA wsa_data;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">29.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">30.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><i><span style="color:gray">/* Exibe uma mensagem de erro e termina o programa */</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">31.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">void</span><span style="color:black"> msg_err_exit</span><span style="color:#66CC66">(</span><span style="color:#993333">char</span><span style="color:black"> *msg</span><span style="color:#66CC66">)</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">32.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">33.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>fprintf</span><span style="color:#66CC66">(</span><span style="color:black">stderr, msg</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">34.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>system</span><span style="color:#66CC66">(</span><span style="color:red">"PAUSE"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">35.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>exit</span><span style="color:#66CC66">(</span><span style="color:black">EXIT_FAILURE</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">36.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#66CC66">}</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">37.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">38.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">int</span><span style="color:black"> main</span><span style="color:#66CC66">(</span><span style="color:#993333">int</span><span style="color:black"> argc, </span><span style="color:#993333">char</span><span style="color:black"> **argv</span><span style="color:#66CC66">)</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">39.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">40.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><i><span style="color:gray">// inicia o Winsock 2.0 (DLL), Only for Windows</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">41.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">if</span><span style="color:black"> </span><span style="color:#66CC66">(</span><span style="color:black">WSAStartup</span><span style="color:#66CC66">(</span><span style="color:black">MAKEWORD</span><span style="color:#66CC66">(</span><span style="color:#CC66CC">2</span><span style="color:black">, </span><span style="color:#CC66CC">0</span><span style="color:#66CC66">)</span><span style="color:black">, &amp;wsa_data</span><span style="color:#66CC66">)</span><span style="color:black"> != </span><span style="color:#CC66CC">0</span><span style="color:#66CC66">)</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">42.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>msg_err_exit</span><span style="color:#66CC66">(</span><span style="color:red">"WSAStartup() failed</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">43.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">44.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><i><span style="color:gray">// criando o socket local para o servidor</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">45.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>local_socket = socket</span><span style="color:#66CC66">(</span><span style="color:black">AF_INET, SOCK_STREAM, IPPROTO_TCP</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">46.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">if</span><span style="color:black"> </span><span style="color:#66CC66">(</span><span style="color:black">local_socket == INVALID_SOCKET</span><span style="color:#66CC66">)</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">47.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">48.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>WSACleanup</span><span style="color:#66CC66">()</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">49.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>msg_err_exit</span><span style="color:#66CC66">(</span><span style="color:red">"socket() failed</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">50.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">}</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">51.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">52.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span style="color:#000066;text-decoration:none;text-underline:none">printf</span></a></span><span style="color:#66CC66">(</span><span style="color:red">"Porta local: "</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">53.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>scanf</span><span style="color:#66CC66">(</span><span style="color:red">"%d"</span><span style="color:black">, &amp;local_port</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">54.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>fflush</span><span style="color:#66CC66">(</span><span style="color:black">stdin</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">55.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">56.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><i><span style="color:gray">// zera a estrutura local_address</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">57.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>memset</span><span style="color:#66CC66">(</span><span style="color:black">&amp;local_address, </span><span style="color:#CC66CC">0</span><span style="color:black">, </span><span style="color:#993333">sizeof</span><span style="color:#66CC66">(</span><span style="color:black">local_address</span><span style="color:#66CC66">))</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">58.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">59.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><i><span style="color:gray">// internet address family</span></i><span style="color:
black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;
line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;border:none;
mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">60.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>local_address.</span><span style="color:#202020">sin_family</span><span style="color:black"> = AF_INET;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">61.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">62.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><i><span style="color:gray">// porta local</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">63.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>local_address.</span><span style="color:#202020">sin_port</span><span style="color:black"> = htons</span><span style="color:#66CC66">(</span><span style="color:black">local_port</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">64.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">65.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><i><span style="color:gray">// endereco</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">66.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>local_address.</span><span style="color:#202020">sin_addr</span><span style="color:black">.</span><span style="color:#202020">s_addr</span><span style="color:black"> = htonl</span><span style="color:#66CC66">(</span><span style="color:black">INADDR_ANY</span><span style="color:#66CC66">)</span><span style="color:black">; </span><i><span style="color:gray">// inet_addr("127.0.0.1")</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">67.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">68.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><i><span style="color:gray">// interligando o socket com o endereço (local)</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">69.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">if</span><span style="color:black"> </span><span style="color:#66CC66">(</span><span style="color:black">bind</span><span style="color:#66CC66">(</span><span style="color:black">local_socket, </span><span style="color:#66CC66">(</span><span style="color:#993333">struct</span><span style="color:black"> sockaddr *</span><span style="color:#66CC66">)</span><span style="color:black"> &amp;local_address, </span><span style="color:#993333">sizeof</span><span style="color:#66CC66">(</span><span style="color:black">local_address</span><span style="color:#66CC66">))</span><span style="color:black"> == SOCKET_ERROR</span><span style="color:#66CC66">)</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">70.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">71.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>WSACleanup</span><span style="color:#66CC66">()</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">72.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>closesocket</span><span style="color:#66CC66">(</span><span style="color:black">local_socket</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">73.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>msg_err_exit</span><span style="color:#66CC66">(</span><span style="color:red">"bind() failed</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">74.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">}</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">75.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">76.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><i><span style="color:gray">// coloca o socket para escutar as conexoes</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">77.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">if</span><span style="color:black"> </span><span style="color:#66CC66">(</span><span style="color:black">listen</span><span style="color:#66CC66">(</span><span style="color:black">local_socket, BACKLOG_MAX</span><span style="color:#66CC66">)</span><span style="color:black"> == SOCKET_ERROR</span><span style="color:#66CC66">)</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">78.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">79.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>WSACleanup</span><span style="color:#66CC66">()</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">80.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>closesocket</span><span style="color:#66CC66">(</span><span style="color:black">local_socket</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">81.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>msg_err_exit</span><span style="color:#66CC66">(</span><span style="color:red">"listen() failed</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">82.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">}</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">83.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">84.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>remote_length = </span><span style="color:#993333">sizeof</span><span style="color:#66CC66">(</span><span style="color:black">remote_address</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">85.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">86.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span style="color:#000066;text-decoration:none;text-underline:none">printf</span></a></span><span style="color:#66CC66">(</span><span style="color:red">"aguardando alguma conexao...</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">87.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>remote_socket = accept</span><span style="color:#66CC66">(</span><span style="color:black">local_socket, </span><span style="color:#66CC66">(</span><span style="color:#993333">struct</span><span style="color:black"> sockaddr *</span><span style="color:#66CC66">)</span><span style="color:black"> &amp;remote_address, &amp;remote_length</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">88.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">if</span><span style="color:#66CC66">(</span><span style="color:black">remote_socket == INVALID_SOCKET</span><span style="color:#66CC66">)</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">89.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">90.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>WSACleanup</span><span style="color:#66CC66">()</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">91.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>closesocket</span><span style="color:#66CC66">(</span><span style="color:black">local_socket</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">92.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>msg_err_exit</span><span style="color:#66CC66">(</span><span style="color:red">"accept() failed</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">93.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">}</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">94.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">95.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span style="color:#000066;text-decoration:none;text-underline:none">printf</span></a></span><span style="color:#66CC66">(</span><span style="color:red">"conexao estabelecida com %s</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:black">, inet_ntoa</span><span style="color:#66CC66">(</span><span style="color:black">remote_address.</span><span style="color:#202020">sin_addr</span><span style="color:#66CC66">))</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">96.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span style="color:#000066;text-decoration:none;text-underline:none">printf</span></a></span><span style="color:#66CC66">(</span><span style="color:red">"aguardando mensagens...</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">97.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">do</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">98.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">99.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><i><span style="color:gray">// limpa o buffer</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">100.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>memset</span><span style="color:#66CC66">(</span><span style="color:black">&amp;message, </span><span style="color:#CC66CC">0</span><span style="color:black">, BUFFER_SIZE</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">101.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">102.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><i><span style="color:gray">// recebe a mensagem do cliente</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">103.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>message_length = recv</span><span style="color:#66CC66">(</span><span style="color:black">remote_socket, message, BUFFER_SIZE, </span><span style="color:#CC66CC">0</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">104.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">if</span><span style="color:#66CC66">(</span><span style="color:black">message_length == SOCKET_ERROR</span><span style="color:#66CC66">)</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">105.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>msg_err_exit</span><span style="color:#66CC66">(</span><span style="color:red">"recv() failed</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">106.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">107.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><i><span style="color:gray">// exibe a mensagem na tela</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">108.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span style="color:#000066;text-decoration:none;text-underline:none">printf</span></a></span><span style="color:#66CC66">(</span><span style="color:red">"%s: %s</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:black">, inet_ntoa</span><span style="color:#66CC66">(</span><span style="color:black">remote_address.</span><span style="color:#202020">sin_addr</span><span style="color:#66CC66">)</span><span style="color:black">, message</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">109.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">}</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">110.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">while</span><span style="color:#66CC66">(</span><span style="color:black">strcmp</span><span style="color:#66CC66">(</span><span style="color:black">message, EXIT_CALL_STRING</span><span style="color:#66CC66">))</span><span style="color:black">; </span><i><span style="color:gray">// sai quando receber um "#quit" do cliente</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">111.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">112.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span style="color:#000066;text-decoration:none;text-underline:none">printf</span></a></span><span style="color:#66CC66">(</span><span style="color:red">"encerrando</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">113.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>WSACleanup</span><span style="color:#66CC66">()</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">114.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>closesocket</span><span style="color:#66CC66">(</span><span style="color:black">local_socket</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">115.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;</span><span style="mso-spacerun:yes">&nbsp;&nbsp;</span>closesocket</span><span style="color:#66CC66">(</span><span style="color:black">remote_socket</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">116.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">117.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>system</span><span style="color:#66CC66">(</span><span style="color:red">"PAUSE"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">118.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">return</span><span style="color:black"> </span><span style="color:#CC66CC">0</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l2 level1 lfo1;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">119.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#66CC66">}</span><span style="color:black"><o:p></o:p></span></pre></div>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<h4 style="margin:0cm;margin-bottom:.0001pt;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:&quot;Trebuchet MS&quot;;mso-bidi-font-family:Arial;
color:#333333;font-weight:normal">WSAStartup()<o:p></o:p></span></h4>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">A função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">WSAStartup()</span></strong><span class="apple-converted-space">&nbsp;</span>inicia o<span class="apple-converted-space">&nbsp;</span><em><span style="font-family:Verdana;
mso-bidi-font-family:Arial">Windows Sockets Dynamic Link</span></em><span class="apple-converted-space">&nbsp;</span>(WinSock DLL). Ela também é usada para
confirma a versão do WinSock DLL. Estamos utilizando a 2.0.<o:p></o:p></span></p>

<p style="margin-top:0cm;margin-right:0cm;margin-bottom:7.5pt;margin-left:0cm;
text-align:justify;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333">Declaração:<o:p></o:p></span></p>

<div style="mso-element:para-border-div;border:solid #CCDBE6 1.0pt;mso-border-alt:
solid #CCDBE6 .75pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;background:#EDF2F6;
margin-left:6.0pt;margin-right:24.0pt"><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l9 level1 lfo2;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt;overflow-x: auto;overflow-y: auto"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">int</span><span style="color:black"> WSAStartup</span><span style="color:#66CC66">(</span><span style="color:black">WORD wVersionRequested, LPWSADATA lpWSAData</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre></div>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O parâmetro<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">wVersionRequested</span></strong><span class="apple-converted-space">&nbsp;</span>é número da maior versão que a
aplicação pode usar. Repare que ele é uma<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">WORD</span></strong><span class="apple-converted-space">&nbsp;</span>onde o byte de maior ordem especifica
a número da minor version e o byte de ordem menor indica a major version. Por
isso eu utilizo a função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">MAKEWORD</span></strong><span class="apple-converted-space">&nbsp;</span>para retornar uma<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">WORD</span></strong><span class="apple-converted-space">&nbsp;</span>(e facilitar minha vida), por exemplo,
se quiser usar a versão do WinSock 1.1 é só alterar para<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">MAKEWORD(1, 1)</span></strong>. Fácil demais...<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O parâmetro<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">lpWSAData</span></strong><span class="apple-converted-space">&nbsp;</span>é um ponteiro para um estrutura<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">WSADATA</span></strong><span class="apple-converted-space">&nbsp;</span>que receberá os detalhes da
implementação do WinSock.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Se der tudo certo a função retornará
0. Se ocorrer um erro você pode usar a função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">WSAGetLastError()</span></strong><span class="apple-converted-space">&nbsp;</span>para saber mais detalhes.<o:p></o:p></span></p>

<h4 style="margin:0cm;margin-bottom:.0001pt;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:&quot;Trebuchet MS&quot;;mso-bidi-font-family:Arial;
color:#333333;font-weight:normal">socket()<o:p></o:p></span></h4>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Use a função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">socket()</span></strong><span class="apple-converted-space">&nbsp;</span>parar criar o socket \o/.<o:p></o:p></span></p>

<p style="margin-top:0cm;margin-right:0cm;margin-bottom:7.5pt;margin-left:0cm;
text-align:justify;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333">Declaração:<o:p></o:p></span></p>

<div style="mso-element:para-border-div;border:solid #CCDBE6 1.0pt;mso-border-alt:
solid #CCDBE6 .75pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;background:#EDF2F6;
margin-left:6.0pt;margin-right:24.0pt"><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l8 level1 lfo3;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt;overflow-x: auto;overflow-y: auto"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">SOCKET WSAAPI socket</span><span style="color:#66CC66">(</span><span style="color:#993333">int</span><span style="color:black"> af, </span><span style="color:#993333">int</span><span style="color:black"> type, </span><span style="color:#993333">int</span><span style="color:black"> protocol</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre></div>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O parâmetro<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">af</span></strong><span class="apple-converted-space">&nbsp;</span>especifica o "address
family" que este socket usa. Nós iremos usar o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">AF_INET</span></strong>. A versão 1.1 do WinSock só
suporta o formato<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">AF_INET</span></strong>.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Alguns formatos possíveis:<br>
</span><strong><span style="font-size:7.5pt;font-family:Verdana;mso-bidi-font-family:
Arial;color:#333333">AF_INET</span></strong><span style="font-size:7.5pt;
font-family:Verdana;mso-bidi-font-family:Arial;color:#333333">: Arpa Internet
Protocols<br>
<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">AF_UNIX</span></strong>:
Unix Internet Protocols<br>
<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">AF_ISSO</span></strong>:
Iso Protocols<br>
<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">AF_NS</span></strong>:
Xerox Network System Protocols</span><span style="font-size:9.0pt;font-family:
Verdana;mso-bidi-font-family:Arial;color:#333333"><o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Se você olhar no header (winsock.h)
vai encontrar outros como o<strong><span style="font-family:Verdana;mso-bidi-font-family:
Arial">AF_FIREFOX</span></strong>, mas é melhor ver quais realmente podem ser
usados no<span class="apple-converted-space">&nbsp;</span><a href="http://msdn2.microsoft.com/en-us/library/ms741416.aspx" target="_blank"><span style="text-decoration:none;text-underline:none">MSDN</span></a>.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O parâmetro<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">type</span></strong><span class="apple-converted-space">&nbsp;</span>especifica o tipo do socket, no nosso
caso é<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">SOCK_STREAM</span></strong>(utilizado
na maioria dos programas), mas você pode usar o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">SOCK_DGRAM</span></strong>(<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">UDP</span></strong>),
mas não vou abordar as diferenças entre eles.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Em<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">protocol</span></strong><span class="apple-converted-space">&nbsp;</span>deixe 0 (zero), isto indica que o
socket irá usar o valor padrão. O<strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">protocol</span></strong><span class="apple-converted-space">&nbsp;</span>pode ser o padrão porque a combinação
do<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">AF_INET</span></strong>+<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">SOCK_STREAM</span></strong><span class="apple-converted-space">&nbsp;</span>já indica que o protocolo é TCP. Eu
coloquei<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">IPPROTO_TCP</span></strong><span class="apple-converted-space">&nbsp;</span>no código, mas não precisa, é só
deixar como 0.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Alguns valores possíveis para o
protocol:<br>
</span><strong><span style="font-size:7.5pt;font-family:Verdana;mso-bidi-font-family:
Arial;color:#333333">IPPROTO_IP</span></strong><span style="font-size:7.5pt;
font-family:Verdana;mso-bidi-font-family:Arial;color:#333333">: Internet
Protocol (0)<br>
<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">IPPROTO_ICMP</span></strong>:
Internet Control Message Protocol (1)<br>
<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">IPPROTO_IGMP</span></strong>:
Internet Group Multicast Protocol (2)<br>
<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">IPPROTO_GGP</span></strong>:
Gateway-Gateway Protocol (3)<br>
<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">IPPROTO_TCP</span></strong>:
Transmission Control Protocol (6)<br>
<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">IPPROTO_UDP</span></strong>:
User Datagrama Protocol (17)</span><span style="font-size:9.0pt;font-family:
Verdana;mso-bidi-font-family:Arial;color:#333333"><o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Se der tudo certo a função irá
retornar o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">socket descriptor</span></strong>,
que é um número que identifica o socket criado. Se falhar irá retorna<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">INVALID_SOCKET</span></strong>, você pode usar a
função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">WSAGetLastError()</span></strong><span class="apple-converted-space">&nbsp;</span>para saber mais detalhes do erro.<o:p></o:p></span></p>

<h4 style="margin:0cm;margin-bottom:.0001pt;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:&quot;Trebuchet MS&quot;;mso-bidi-font-family:Arial;
color:#333333;font-weight:normal">bind()<o:p></o:p></span></h4>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Agora precisamos dar nomes aos bois,
precisamos dizer que o nosso socket se chama "192.168.0.1", por
exemplo. Usaremos a função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">bind()</span></strong><span class="apple-converted-space">&nbsp;</span>para isso.<o:p></o:p></span></p>

<p style="margin-top:0cm;margin-right:0cm;margin-bottom:7.5pt;margin-left:0cm;
text-align:justify;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333">Declaração:<o:p></o:p></span></p>

<div style="mso-element:para-border-div;border:solid #CCDBE6 1.0pt;mso-border-alt:
solid #CCDBE6 .75pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;background:#EDF2F6;
margin-left:6.0pt;margin-right:24.0pt"><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l7 level1 lfo4;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt;overflow-x: auto;overflow-y: auto"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">int</span><span style="color:black"> bind</span><span style="color:#66CC66">(</span><span style="color:black">SOCKET s, </span><span style="color:#993333">const</span><span style="color:black"> </span><span style="color:#993333">struct</span><span style="color:black"> sockaddr *addr, </span><span style="color:#993333">int</span><span style="color:black"> namelen</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre></div>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O parâmetro<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">s</span></strong><span class="apple-converted-space">&nbsp;</span>é
o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:
Verdana;mso-bidi-font-family:Arial">socket descriptor</span></strong><span class="apple-converted-space">&nbsp;</span>retornado pela função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">socket()</span></strong>. O parâmetro<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">addr</span></strong><span class="apple-converted-space">&nbsp;</span>é um ponteiro para uma estrutura do
tipo<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">sockaddr</span></strong>.
O<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">namelen</span></strong><span class="apple-converted-space">&nbsp;</span>é o tamanho em bytes da estrutura, use
a função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">sizeof()</span></strong><span class="apple-converted-space">&nbsp;</span>para isto.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Esta parte pode confundir, antes de
usar a função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">bind()</span></strong><span class="apple-converted-space">&nbsp;</span>nós precisamos conhecer as estruturas<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">sockaddr</span></strong>,<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">sockaddr_in</span></strong><span class="apple-converted-space">&nbsp;</span>e<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">in_addr</span></strong>,
mas a que iremos utilizar é a<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">sockaddr_in</span></strong>.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Definições da estrutura<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">sockaddr</span></strong>:<o:p></o:p></span></p>

<div style="mso-element:para-border-div;border:solid #CCDBE6 1.0pt;mso-border-alt:
solid #CCDBE6 .75pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;background:#EDF2F6;
margin-left:6.0pt;margin-right:24.0pt"><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l10 level1 lfo5;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt;overflow-x: auto;overflow-y: auto"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">struct</span><span style="color:black"> sockaddr<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l10 level1 lfo5;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l10 level1 lfo5;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>u_short sa_family; </span><i><span style="color:gray">// address family</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l10 level1 lfo5;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#993333">char</span><span style="color:black"> sa_data</span><span style="color:#66CC66">[</span><span style="color:#CC66CC">14</span><span style="color:#66CC66">]</span><span style="color:black">; </span><i><span style="color:gray">// address</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l10 level1 lfo5;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#66CC66">}</span><span style="color:black">;<o:p></o:p></span></pre></div>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O item<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">sa_data</span></strong><span class="apple-converted-space">&nbsp;</span>da estrutura vai depende do
"address family". No WinSock 1.1, como eu disse, apenas o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">AF_INET</span></strong><span class="apple-converted-space">&nbsp;</span>é suportado, logo somente um "endereçamento
de internet" é suportado no<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">sa_data</span></strong>.
Lembrando que você não vai utilizar esta estrutura, mas eu coloquei porque ela
aparece em um "cast" de um dos parâmetros da função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">bind()</span></strong><span class="apple-converted-space">&nbsp;</span>que estamos utilizando. Você deve
utilizar uma outra estrutura no lugar da<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">sockaddr</span></strong><span class="apple-converted-space">&nbsp;</span>quando chamar a função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">bind()</span></strong>, use a<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">sockaddr_in</span></strong>.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Definições da estrutura<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">sockaddr_in</span></strong>:<o:p></o:p></span></p>

<div style="mso-element:para-border-div;border:solid #CCDBE6 1.0pt;mso-border-alt:
solid #CCDBE6 .75pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;background:#EDF2F6;
margin-left:6.0pt;margin-right:24.0pt"><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l3 level1 lfo6;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt;overflow-x: auto;overflow-y: auto"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">struct</span><span style="color:black"> sockaddr_in<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l3 level1 lfo6;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l3 level1 lfo6;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#993333">short</span><span style="color:black"> sin_family; </span><i><span style="color:gray">// address family</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l3 level1 lfo6;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>u_short sin_port; </span><i><span style="color:gray">// port</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l3 level1 lfo6;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#993333">struct</span><span style="color:black"> in_addr sin_addr; </span><i><span style="color:gray">// internet address</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l3 level1 lfo6;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#993333">char</span><span style="color:black"> sin_zero</span><span style="color:#66CC66">[</span><span style="color:#CC66CC">8</span><span style="color:#66CC66">]</span><span style="color:black">; </span><i><span style="color:gray">// to make a beautiful cast</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l3 level1 lfo6;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#66CC66">}</span><span style="color:black">;<o:p></o:p></span></pre></div>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<p style="margin-top:0cm;margin-right:0cm;margin-bottom:7.5pt;margin-left:0cm;
text-align:justify;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333">Primeiro você deve zerar a estrutura e depois preencher alguns
itens. No código que eu fiz está assim:<o:p></o:p></span></p>

<div style="mso-element:para-border-div;border:solid #CCDBE6 1.0pt;mso-border-alt:
solid #CCDBE6 .75pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;background:#EDF2F6;
margin-left:6.0pt;margin-right:24.0pt"><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l4 level1 lfo7;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt;overflow-x: auto;overflow-y: auto"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">struct</span><span style="color:black"> sockaddr_in local_address;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l4 level1 lfo7;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><i><span style="color:gray">/* ... */</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l4 level1 lfo7;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">memset</span><span style="color:#66CC66">(</span><span style="color:black">&amp;local_address, </span><span style="color:#CC66CC">0</span><span style="color:black">, </span><span style="color:#993333">sizeof</span><span style="color:#66CC66">(</span><span style="color:black">local_address</span><span style="color:#66CC66">))</span><span style="color:black">; </span><i><span style="color:gray">// zera a estrutura</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l4 level1 lfo7;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l4 level1 lfo7;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">local_address.</span><span style="color:#202020">sin_family</span><span style="color:black"> = AF_INET;<o:p></o:p></span></pre><pre style="margin-left:
18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l4 level1 lfo7;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">local_address.</span><span style="color:#202020">sin_port</span><span style="color:black"> = htons</span><span style="color:#66CC66">(</span><span style="color:black">local_port</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l4 level1 lfo7;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">local_address.</span><span style="color:#202020">sin_addr</span><span style="color:black">.</span><span style="color:#202020">s_addr</span><span style="color:black"> = htonl</span><span style="color:#66CC66">(</span><span style="color:black">INADDR_ANY</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre></div>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><strong><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Importante!</span></strong><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333"><br>
Nem todos os computadores armazenam os dados na mesma ordem na memória. Existem
computadores que trabalham no formato "Big Endian", onde byte menos
significativo fica no endereço de memória de maior valor. Por exemplo, para
armazenar o número<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">0x01234567</span></strong><span class="apple-converted-space">&nbsp;</span>ficaria assim:<br>
</span><strong><span style="font-size:7.5pt;font-family:Verdana;mso-bidi-font-family:
Arial;color:#333333">endereço 0x101</span></strong><span style="font-size:7.5pt;
font-family:Verdana;mso-bidi-font-family:Arial;color:#333333">: 01<br>
<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">endereço
0x102</span></strong>: 23<br>
<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">endereço
0x103</span></strong>: 45<br>
<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">endereço
0x104</span></strong>: 67</span><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O maior endereço é o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">0x104</span></strong><span class="apple-converted-space">&nbsp;</span>e o byte menos significativo de<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">0x01234567</span></strong><span class="apple-converted-space">&nbsp;</span>é o último da direita (67).<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Já nos computadores "Little
Endian", ocorre o inverso, o byte menos significativo fica no endereço de
memória de menor valor:<br>
</span><strong><span style="font-size:7.5pt;font-family:Verdana;mso-bidi-font-family:
Arial;color:#333333">endereço 0x101</span></strong><span style="font-size:7.5pt;
font-family:Verdana;mso-bidi-font-family:Arial;color:#333333">: 67<br>
<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">endereço
0x102</span></strong>: 45<br>
<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">endereço
0x103</span></strong>: 23<br>
<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">endereço
0x104</span></strong>: 01</span><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><br>
O menor endereço é o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">0x101</span></strong><span class="apple-converted-space">&nbsp;</span>e o byte menos significativo de<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">0x01234567</span></strong><span class="apple-converted-space">&nbsp;</span>é o último da direita (67).<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Os computadores com processadores
baseados no Intel x86 são "Little Endian", mas a ordem dos bytes na
rede (network) é "Big Endian". Precisamos converter os dados antes de
enviá-los usando as funções<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">htons()</span></strong><span class="apple-converted-space">&nbsp;</span>e<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">htonl()</span></strong>:<br>
</span><strong><span style="font-size:7.5pt;font-family:Verdana;mso-bidi-font-family:
Arial;color:#333333">htons()</span></strong><span style="font-size:7.5pt;
font-family:Verdana;mso-bidi-font-family:Arial;color:#333333">: converte um<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">unsigned short</span></strong><span class="apple-converted-space">&nbsp;</span>(host-to-network)<br>
<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">htonl()</span></strong>:
converte um<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">unsigned long</span></strong><span class="apple-converted-space">&nbsp;</span>(host-to-network)</span><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333"><o:p></o:p></span></p>

<p style="margin-top:0cm;margin-right:0cm;margin-bottom:7.5pt;margin-left:0cm;
text-align:justify;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333">Existem outras funções para esta converter os dados, mas nós
iremos utilizar apenas esses.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Voltando a estrutura<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">sockaddr_in</span></strong>, vamos falar do item<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">sin_addr</span></strong>. Veja na declaração que
este item é uma estrutura do tipo<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">in_ddr</span></strong>.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Definições da estrutura<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">in_addr</span></strong>:<o:p></o:p></span></p>

<div style="mso-element:para-border-div;border:solid #CCDBE6 1.0pt;mso-border-alt:
solid #CCDBE6 .75pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;background:#EDF2F6;
margin-left:6.0pt;margin-right:24.0pt"><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l11 level1 lfo8;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt;overflow-x: auto;overflow-y: auto"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">struct</span><span style="color:black"> in_addr<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l11 level1 lfo8;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l11 level1 lfo8;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#993333">union</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l11 level1 lfo8;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l11 level1 lfo8;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#993333">struct</span><span style="color:black"> </span><span style="color:#66CC66">{</span><span style="color:black"> u_char s_b1,s_b2,s_b3,s_b4; </span><span style="color:#66CC66">}</span><span style="color:black"> S_un_b;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l11 level1 lfo8;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#993333">struct</span><span style="color:black"> </span><span style="color:#66CC66">{</span><span style="color:black"> u_short s_w1,s_w2; </span><span style="color:#66CC66">}</span><span style="color:black"> S_un_w;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l11 level1 lfo8;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>u_long S_addr;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l11 level1 lfo8;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">}</span><span style="color:black"> S_un;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l11 level1 lfo8;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">9.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#339933">#define s_addr S_un.S_addr</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l11 level1 lfo8;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">10.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#339933">#define s_host S_un.S_un_b.s_b2</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l11 level1 lfo8;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">11.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#339933">#define s_net S_un.S_un_b.s_b1</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l11 level1 lfo8;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">12.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#339933">#define s_imp S_un.S_un_w.s_w2</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l11 level1 lfo8;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">13.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#339933">#define s_impno S_un.S_un_b.s_b4</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l11 level1 lfo8;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">14.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#339933">#define s_lh S_un.S_un_b.s_b3</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l11 level1 lfo8;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">15.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#66CC66">}</span><span style="color:black">;<o:p></o:p></span></pre></div>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Repare nos<span class="apple-converted-space">&nbsp;</span><em><span style="font-family:Verdana;
mso-bidi-font-family:Arial">defines</span></em><span class="apple-converted-space">&nbsp;</span>que ela possui, você pode acessar o
dados da estrutura através deles. Quando você acessa<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">local_address.sin_addr.s_addr</span></strong><span class="apple-converted-space">&nbsp;</span>na verdade esta acessando<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">local_address.sin_addr.S_un.S_addr</span></strong>.
Mas sempre use os<span class="apple-converted-space">&nbsp;</span><em><span style="font-family:Verdana;mso-bidi-font-family:Arial">defines</span></em><span class="apple-converted-space">&nbsp;</span>para manter compatibilidade, não
acesse os dados diretamente.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O valor indicado para<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">local_address.sin_addr.s_addr</span></strong><span class="apple-converted-space">&nbsp;</span>é<strong><span style="font-family:
Verdana;mso-bidi-font-family:Arial">htonl(INADDR_ANY)</span></strong>, isto
indica que usaremos todos os endereços locais designados ao nosso servidor. Por
exemplo, se sua máquina possui duas placas de rede (192.168.0.1 e 192.168.0.2),
você pode usar os dois endereços para o seu socket. Mas se você quiser
especificar apenas uma placa, use a função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">inet_addr()</span></strong>.
Nós usaremos esta função para fazer o programa cliente.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Sobre o item<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">sin_zero</span></strong><span class="apple-converted-space">&nbsp;</span>da estrutura<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">sockaddr_in</span></strong>, ele server apenas para
ocupar espaço, de modo que a estrutura tenha o mesmo tamanho (em bytes) da
estrutura<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">sockaddr</span></strong>.
Assim podemos fazer "casts" de uma estrutura para outra (utilizado no
parâmetro da função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">bind()</span></strong>).
Por isso a estrutura deve ser preenchida com zeros antes de ser utilizada.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Se der tudo certo a função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">bind()</span></strong><span class="apple-converted-space">&nbsp;</span>retornará 0, caso contrário retornará<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">SOCKET_ERROR</span></strong>,
use o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">WSAGetLastError()</span></strong><span class="apple-converted-space">&nbsp;</span>para analisar o erro.<o:p></o:p></span></p>

<h4 style="margin:0cm;margin-bottom:.0001pt;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:&quot;Trebuchet MS&quot;;mso-bidi-font-family:Arial;
color:#333333;font-weight:normal">listen()<o:p></o:p></span></h4>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">A função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">listen()</span></strong><span class="apple-converted-space">&nbsp;</span>coloca o socket para escutar as
conexões. Seria como ligar o socket, agora ele pode receber por conexões dos
clientes.<o:p></o:p></span></p>

<p style="margin-top:0cm;margin-right:0cm;margin-bottom:7.5pt;margin-left:0cm;
text-align:justify;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333">Declaração:<o:p></o:p></span></p>

<div style="mso-element:para-border-div;border:solid #CCDBE6 1.0pt;mso-border-alt:
solid #CCDBE6 .75pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;background:#EDF2F6;
margin-left:6.0pt;margin-right:24.0pt"><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l0 level1 lfo9;background:#EDF2F6;
border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt;overflow-x: auto;overflow-y: auto"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">int</span><span style="color:black"> listen</span><span style="color:#66CC66">(</span><span style="color:black">SOCKET s, </span><span style="color:#993333">int</span><span style="color:black"> backlog</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre></div>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O parâmetro<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">s</span></strong><span class="apple-converted-space">&nbsp;</span>é
o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:
Verdana;mso-bidi-font-family:Arial">socket descriptor</span></strong><span class="apple-converted-space">&nbsp;</span>que você já conhece. O<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">backlog</span></strong><span class="apple-converted-space">&nbsp;</span>indica quantas conexões pendentes o
socket pode deixar na fila para serem processadas, quando as conexões são
aceitas elas são removidas da fila. O mínimo para o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">backlog</span></strong><span class="apple-converted-space">&nbsp;</span>é 1 e o máximo 5, mas não achei alguma
coisa no site do MSDN que indicasse que o limite é sempre 5.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Se tudo der certo ele vai retornar 0,
caso contrário ele retornará um<strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">SOCKET_ERROR</span></strong>. Novamente você pode
usar a função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">WSAGetLastError()</span></strong>para
analisar o erro se quiser.<o:p></o:p></span></p>

<h4 style="margin:0cm;margin-bottom:.0001pt;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:&quot;Trebuchet MS&quot;;mso-bidi-font-family:Arial;
color:#333333;font-weight:normal">accept()<o:p></o:p></span></h4>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">accept()</span></strong><span class="apple-converted-space">&nbsp;</span>aceita a conexão quando ela é
detectada.<o:p></o:p></span></p>

<p style="margin-top:0cm;margin-right:0cm;margin-bottom:7.5pt;margin-left:0cm;
text-align:justify;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333">Declaração:<o:p></o:p></span></p>

<div style="mso-element:para-border-div;border:solid #CCDBE6 1.0pt;mso-border-alt:
solid #CCDBE6 .75pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;background:#EDF2F6;
margin-left:6.0pt;margin-right:24.0pt"><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l6 level1 lfo10;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt;overflow-x: auto;overflow-y: auto"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">SOCKET accept</span><span style="color:#66CC66">(</span><span style="color:black">SOCKET s, </span><span style="color:#993333">struct</span><span style="color:black"> sockaddr* addr, </span><span style="color:#993333">int</span><span style="color:black">* addrlen</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre></div>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O parâmetro<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">s</span></strong><span class="apple-converted-space">&nbsp;</span>é
o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:
Verdana;mso-bidi-font-family:Arial">socket descriptor</span></strong>. O
parâmetro<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">addr</span></strong><span class="apple-converted-space">&nbsp;</span>é um ponteiro para uma estrutura do
tipo<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">sockaddr</span></strong><span class="apple-converted-space">&nbsp;</span>(igual ao do função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">bind()</span></strong>), nela a função irá
armazenar a o endereço (estrutura) da entidade (cliente) que requisitou a
conexão. Você não precisa armazenar este valor se não quiser obter informações
do cliente, pode colocar apenas um NULL no lugar.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O parâmetro<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">addrlen</span></strong><span class="apple-converted-space">&nbsp;</span>é um ponteiro onde a função irá
colocar o tamanho em bytes da estrutura<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">addr</span></strong><span class="apple-converted-space">&nbsp;</span>recebida do cliente. Se você passar um
NULL para o parâmetro<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">addr</span></strong><span class="apple-converted-space">&nbsp;</span>então o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">addrlen</span></strong><span class="apple-converted-space">&nbsp;</span>retornará NULL para o ponteiro. Você
também pode apenas colocar um NULL no parâmetro do<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">addrlen</span></strong>.<o:p></o:p></span></p>

<p style="margin-top:0cm;margin-right:0cm;margin-bottom:7.5pt;margin-left:0cm;
text-align:justify;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333">Repare que o programa ficará esperando por uma conexão, ele
ficará meio travado enquanto isso. Você terá que fazer ele rodar de forma
assíncrona, mas isso não é importante agora, primeiro temos que fazer o
servidor e o cliente funcionarem.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">A função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">accept()</span></strong><span class="apple-converted-space">&nbsp;</span>irá retornar um<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">socket descriptor</span></strong><span class="apple-converted-space">&nbsp;</span>do cliente. Se der algum problema será
retornado um<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">INVALID_SOCKET</span></strong>.
Novamente use o<strong><span style="font-family:Verdana;mso-bidi-font-family:
Arial">WSAGetLastError()</span></strong><span class="apple-converted-space">&nbsp;</span>para
verificar os erros.<o:p></o:p></span></p>

<h4 style="margin:0cm;margin-bottom:.0001pt;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:&quot;Trebuchet MS&quot;;mso-bidi-font-family:Arial;
color:#333333;font-weight:normal">recv()<o:p></o:p></span></h4>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">recv()</span></strong><span class="apple-converted-space">&nbsp;</span>recebe os dados de uma conexão.<o:p></o:p></span></p>

<p style="margin-top:0cm;margin-right:0cm;margin-bottom:7.5pt;margin-left:0cm;
text-align:justify;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333">Declaração:<o:p></o:p></span></p>

<div style="mso-element:para-border-div;border:solid #CCDBE6 1.0pt;mso-border-alt:
solid #CCDBE6 .75pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;background:#EDF2F6;
margin-left:6.0pt;margin-right:24.0pt"><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l13 level1 lfo11;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt;overflow-x: auto;overflow-y: auto"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">int</span><span style="color:black"> recv</span><span style="color:#66CC66">(</span><span style="color:black">SOCKET s, </span><span style="color:#993333">char</span><span style="color:black">* buf, </span><span style="color:#993333">int</span><span style="color:black"> len, </span><span style="color:#993333">int</span><span style="color:black"> flags</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre></div>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O parâmetro<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">s</span></strong><span class="apple-converted-space">&nbsp;</span>é
o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:
Verdana;mso-bidi-font-family:Arial">socket descriptor</span></strong><span class="apple-converted-space">&nbsp;</span>do cliente. O parâmetro<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">buf</span></strong><span class="apple-converted-space">&nbsp;</span>é o buffer onde serão armazenadas as
informações recebidas. O<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">len</span></strong><span class="apple-converted-space">&nbsp;</span>é o tamanho deste buffer.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O parâmetro<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">flags</span></strong><span class="apple-converted-space">&nbsp;</span>indica o modo como serão recebidos os
dados, eu deixei como 0 (zero) assim ele não fará nenhuma ação especial. Para
mais detalhes sobre outras opções olhe no site<span class="apple-converted-space">&nbsp;</span><a href="http://msdn2.microsoft.com/en-us/library/ms741416.aspx" target="_blank"><span style="text-decoration:none;text-underline:none">MSDN</span></a>.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">recv()</span></strong><span class="apple-converted-space">&nbsp;</span>irá retornar o total de bytes
recebidos, mas você não irá receber mais bytes do que especificou em len. Ele
retorna 0 (zero) quando a conexão é fechada normalmente. Se der algum erro ele
retorna um<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">SOCKET_ERROR</span></strong>.
Use o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">WSAGetLastError()</span></strong><span class="apple-converted-space">&nbsp;</span>para saber mais do erro.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Repare que eu também usei a função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">inet_ntoa()</span></strong><span class="apple-converted-space">&nbsp;</span>para exibir junto com a mensagem. Essa
função converte um endereço de Internet (IPv4) em uma string do endereço
formatado nos padrões de Internet com pontos decimais. Ela já retorna em
"Little Endian".<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">O<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">recv()</span></strong><span class="apple-converted-space">&nbsp;</span>está dentro de um loop, antes de
receber uma mensagem o buffer (variável<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">message</span></strong><span class="apple-converted-space">&nbsp;</span>no código) deverá ser limpo. Após
receber a mensagem, ela é exibida. O loop só pára quando o cliente enviar uma
mensagem "#quit". Não é a melhor maneira de ser terminar o programa,
mas serve por enquanto.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Depois de tudo pronto, nós devemos
finalizar a aplicação com as funções<strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">WSACleanup()</span></strong><span class="apple-converted-space">&nbsp;</span>e<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">closesocket()</span></strong>.
Você só precisa olhar o código para entender como usa-las. E é isso, o
micro-nano-humilde-servidor tá pronto agora só falta fazer o cliente.<o:p></o:p></span></p>

<h3 style="margin:0cm;margin-bottom:.0001pt;line-height:13.5pt;background:#F3F3F3"><span style="font-family:&quot;Trebuchet MS&quot;;mso-bidi-font-family:Arial;color:#333333">Criando
cliente que envia as mensagens<o:p></o:p></span></h3>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<div style="mso-element:para-border-div;border:solid #CCDBE6 1.0pt;mso-border-alt:
solid #CCDBE6 .75pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;background:#EDF2F6;
margin-left:6.0pt;margin-right:24.0pt"><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt;overflow-x: auto;overflow-y: auto"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><i><span style="color:gray">/*</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><i><span style="color:gray">&nbsp;<span style="mso-spacerun:yes">&nbsp;&nbsp; </span>CLIENTE</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><i><span style="color:gray">*/</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#339933">#include &lt;stdio.h&gt;</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#339933">#include &lt;stdlib.h&gt;</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#339933">#include &lt;string.h&gt;</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#339933">#include &lt;winsock.h&gt;</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">9.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">10.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#339933">#define BUFFER_SIZE 128</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">11.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#339933">#define EXIT_CALL_STRING "#quit"</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">12.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">13.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">int</span><span style="color:black"> remote_socket = </span><span style="color:#CC66CC">0</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">14.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">int</span><span style="color:black"> message_length = </span><span style="color:#CC66CC">0</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">15.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">16.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">unsigned</span><span style="color:black"> </span><span style="color:#993333">short</span><span style="color:black"> remote_port = </span><span style="color:#CC66CC">0</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">17.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">18.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">char</span><span style="color:black"> remote_ip</span><span style="color:#66CC66">[</span><span style="color:#CC66CC">32</span><span style="color:#66CC66">]</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">19.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">char</span><span style="color:black"> message</span><span style="color:#66CC66">[</span><span style="color:black">BUFFER_SIZE</span><span style="color:#66CC66">]</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">20.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">21.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">struct</span><span style="color:black"> sockaddr_in remote_address;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">22.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">23.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">WSADATA wsa_data;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">24.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">25.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><i><span style="color:gray">/* Exibe uma mensagem de erro e termina o programa */</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">26.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">void</span><span style="color:black"> msg_err_exit</span><span style="color:#66CC66">(</span><span style="color:#993333">char</span><span style="color:black"> *msg</span><span style="color:#66CC66">)</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">27.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">28.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>fprintf</span><span style="color:#66CC66">(</span><span style="color:black">stderr, msg</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">29.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>system</span><span style="color:#66CC66">(</span><span style="color:red">"PAUSE"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">30.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>exit</span><span style="color:#66CC66">(</span><span style="color:black">EXIT_FAILURE</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">31.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#66CC66">}</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">32.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">33.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">int</span><span style="color:black"> main</span><span style="color:#66CC66">(</span><span style="color:#993333">int</span><span style="color:black"> argc, </span><span style="color:#993333">char</span><span style="color:black"> **argv</span><span style="color:#66CC66">)</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">34.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">35.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">if</span><span style="color:black"> </span><span style="color:#66CC66">(</span><span style="color:black">WSAStartup</span><span style="color:#66CC66">(</span><span style="color:black">MAKEWORD</span><span style="color:#66CC66">(</span><span style="color:#CC66CC">2</span><span style="color:black">, </span><span style="color:#CC66CC">0</span><span style="color:#66CC66">)</span><span style="color:black">, &amp;wsa_data</span><span style="color:#66CC66">)</span><span style="color:black"> != </span><span style="color:#CC66CC">0</span><span style="color:#66CC66">)</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">36.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>msg_err_exit</span><span style="color:#66CC66">(</span><span style="color:red">"WSAStartup() failed</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">37.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">38.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span style="color:#000066;text-decoration:none;text-underline:none">printf</span></a></span><span style="color:#66CC66">(</span><span style="color:red">"IP do servidor: "</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">39.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>scanf</span><span style="color:#66CC66">(</span><span style="color:red">"%s"</span><span style="color:black">, remote_ip</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">40.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>fflush</span><span style="color:#66CC66">(</span><span style="color:black">stdin</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">41.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">42.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span style="color:#000066;text-decoration:none;text-underline:none">printf</span></a></span><span style="color:#66CC66">(</span><span style="color:red">"Porta do servidor: "</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">43.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>scanf</span><span style="color:#66CC66">(</span><span style="color:red">"%d"</span><span style="color:black">, &amp;remote_port</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">44.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>fflush</span><span style="color:#66CC66">(</span><span style="color:black">stdin</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">45.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">46.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>remote_socket = socket</span><span style="color:#66CC66">(</span><span style="color:black">AF_INET, SOCK_STREAM, IPPROTO_TCP</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">47.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">if</span><span style="color:black"> </span><span style="color:#66CC66">(</span><span style="color:black">remote_socket == INVALID_SOCKET</span><span style="color:#66CC66">)</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">48.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">49.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>WSACleanup</span><span style="color:#66CC66">()</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">50.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>msg_err_exit</span><span style="color:#66CC66">(</span><span style="color:red">"socket() failed</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">51.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">}</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">52.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">53.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><i><span style="color:gray">// preenchendo o remote_address (servidor)</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">54.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>memset</span><span style="color:#66CC66">(</span><span style="color:black">&amp;remote_address, </span><span style="color:#CC66CC">0</span><span style="color:black">, </span><span style="color:#993333">sizeof</span><span style="color:#66CC66">(</span><span style="color:black">remote_address</span><span style="color:#66CC66">))</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">55.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>remote_address.</span><span style="color:#202020">sin_family</span><span style="color:black"> = AF_INET;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">56.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>remote_address.</span><span style="color:#202020">sin_addr</span><span style="color:black">.</span><span style="color:#202020">s_addr</span><span style="color:black"> = inet_addr</span><span style="color:#66CC66">(</span><span style="color:black">remote_ip</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">57.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>remote_address.</span><span style="color:#202020">sin_port</span><span style="color:black"> = htons</span><span style="color:#66CC66">(</span><span style="color:black">remote_port</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">58.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">59.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span style="color:#000066;text-decoration:none;text-underline:none">printf</span></a></span><span style="color:#66CC66">(</span><span style="color:red">"conectando ao servidor %s...</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:black">, remote_ip</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">60.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">if</span><span style="color:black"> </span><span style="color:#66CC66">(</span><span style="color:black">connect</span><span style="color:#66CC66">(</span><span style="color:black">remote_socket, </span><span style="color:#66CC66">(</span><span style="color:#993333">struct</span><span style="color:black"> sockaddr *</span><span style="color:#66CC66">)</span><span style="color:black"> &amp;remote_address, </span><span style="color:#993333">sizeof</span><span style="color:#66CC66">(</span><span style="color:black">remote_address</span><span style="color:#66CC66">))</span><span style="color:black"> == SOCKET_ERROR</span><span style="color:#66CC66">)</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">61.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">62.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>WSACleanup</span><span style="color:#66CC66">()</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">63.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>msg_err_exit</span><span style="color:#66CC66">(</span><span style="color:red">"connect() failed</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">64.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">}</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">65.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">66.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span style="color:#000066;text-decoration:none;text-underline:none">printf</span></a></span><span style="color:#66CC66">(</span><span style="color:red">"digite as mensagens</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">67.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">do</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">68.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">69.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><i><span style="color:gray">// limpa o buffer</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">70.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>memset</span><span style="color:#66CC66">(</span><span style="color:black">&amp;message, </span><span style="color:#CC66CC">0</span><span style="color:black">, BUFFER_SIZE</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">71.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">72.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span style="color:#000066;text-decoration:none;text-underline:none">printf</span></a></span><span style="color:#66CC66">(</span><span style="color:red">"msg: "</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">73.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>gets</span><span style="color:#66CC66">(</span><span style="color:black">message</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">74.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>fflush</span><span style="color:#66CC66">(</span><span style="color:black">stdin</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">75.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">76.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>message_length = strlen</span><span style="color:#66CC66">(</span><span style="color:black">message</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">77.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">78.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><i><span style="color:gray">// envia a mensagem para o servidor</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">79.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">if</span><span style="color:black"> </span><span style="color:#66CC66">(</span><span style="color:black">send</span><span style="color:#66CC66">(</span><span style="color:black">remote_socket, message, message_length, </span><span style="color:#CC66CC">0</span><span style="color:#66CC66">)</span><span style="color:black"> == SOCKET_ERROR</span><span style="color:#66CC66">)</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">80.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">{</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">81.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>WSACleanup</span><span style="color:#66CC66">()</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">82.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>closesocket</span><span style="color:#66CC66">(</span><span style="color:black">remote_socket</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">83.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>msg_err_exit</span><span style="color:#66CC66">(</span><span style="color:red">"send() failed</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">84.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">}</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">85.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#66CC66">}</span><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">86.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">while</span><span style="color:#66CC66">(</span><span style="color:black">strcmp</span><span style="color:#66CC66">(</span><span style="color:black">message, EXIT_CALL_STRING</span><span style="color:#66CC66">))</span><span style="color:black">; </span><i><span style="color:gray">// sai quando enviar um "#quit" para o servidor</span></i><span style="color:black"><o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">87.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">88.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span style="color:#000066;text-decoration:none;text-underline:none">printf</span></a></span><span style="color:#66CC66">(</span><span style="color:red">"encerrando</span><b><span style="color:#000099">\n</span></b><span style="color:red">"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">89.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>WSACleanup</span><span style="color:#66CC66">()</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">90.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>closesocket</span><span style="color:#66CC66">(</span><span style="color:black">remote_socket</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">91.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black">&nbsp;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:
&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">92.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span>system</span><span style="color:#66CC66">(</span><span style="color:red">"PAUSE"</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">93.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:black"><span style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span style="color:#B1B100">return</span><span style="color:black"> </span><span style="color:#CC66CC">0</span><span style="color:black">;<o:p></o:p></span></pre><pre style="margin-left:18.0pt;text-indent:-18.0pt;line-height:13.5pt;mso-list:l12 level1 lfo12;
background:#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;
mso-padding-alt:4.0pt 4.0pt 4.0pt 4.0pt"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">94.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#66CC66">}</span><span style="color:black"><o:p></o:p></span></pre></div>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<p style="margin-top:0cm;margin-right:0cm;margin-bottom:7.5pt;margin-left:0cm;
text-align:justify;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333">Essa parte vai ser mais rápida, pois já vimos o básico sobre
sockets no servidor.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Você deve criar um socket no cliente
para poder conectar ao servidor. Ele precisa preencher uma estrutura do tipo<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">socketaddr_in</span></strong><span class="apple-converted-space">&nbsp;</span>(que nós já vimos) com as informações
do servidor, olhe o código para entender melhor.<o:p></o:p></span></p>

<h4 style="margin:0cm;margin-bottom:.0001pt;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:&quot;Trebuchet MS&quot;;mso-bidi-font-family:Arial;
color:#333333;font-weight:normal">connect()<o:p></o:p></span></h4>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">A função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">connect()</span></strong><span class="apple-converted-space">&nbsp;</span>irá conectar o cliente com o servidor.<o:p></o:p></span></p>

<p style="margin-top:0cm;margin-right:0cm;margin-bottom:7.5pt;margin-left:0cm;
text-align:justify;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333">Declaração:<o:p></o:p></span></p>

<div style="mso-element:para-border-div;border:solid #CCDBE6 1.0pt;mso-border-alt:
solid #CCDBE6 .75pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;background:#EDF2F6;
margin-left:6.0pt;margin-right:24.0pt"><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l1 level1 lfo13;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt;overflow-x: auto;overflow-y: auto"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">int</span><span style="color:black"> connect</span><span style="color:#66CC66">(</span><span style="color:black">SOCKET s, </span><span style="color:#993333">const</span><span style="color:black"> </span><span style="color:#993333">struct</span><span style="color:black"> sockaddr* name, </span><span style="color:#993333">int</span><span style="color:black"> namelen</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre></div>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Ele recebe parâmetros iguais ao da
função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">bind()</span></strong>.
Se der algum erro ele retorna um<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">SOCKET_ERROR</span></strong>.<o:p></o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">A função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">connect()</span></strong><span class="apple-converted-space">&nbsp;</span>tem o mesmo problema da função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">accept()</span></strong>, enquanto ele estiver
tentando conectar ficará travado (precisa ser assíncrono), mas não vou mostra
como se faz isso, fica como lição de casa XD.<o:p></o:p></span></p>

<h4 style="margin:0cm;margin-bottom:.0001pt;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:&quot;Trebuchet MS&quot;;mso-bidi-font-family:Arial;
color:#333333;font-weight:normal">send()<o:p></o:p></span></h4>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">E o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">send()</span></strong><span class="apple-converted-space">&nbsp;</span>é a função responsável por enviar
informações ao servidor.<o:p></o:p></span></p>

<p style="margin-top:0cm;margin-right:0cm;margin-bottom:7.5pt;margin-left:0cm;
text-align:justify;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333">Declaração:<o:p></o:p></span></p>

<div style="mso-element:para-border-div;border:solid #CCDBE6 1.0pt;mso-border-alt:
solid #CCDBE6 .75pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;background:#EDF2F6;
margin-left:6.0pt;margin-right:24.0pt"><pre style="margin-left:18.0pt;
text-indent:-18.0pt;line-height:13.5pt;mso-list:l5 level1 lfo14;background:
#EDF2F6;border:none;mso-border-alt:solid #CCDBE6 .75pt;padding:0cm;mso-padding-alt:
4.0pt 4.0pt 4.0pt 4.0pt;overflow-x: auto;overflow-y: auto"><!--[if !supportLists]--><span style="mso-fareast-font-family:&quot;Courier New&quot;;color:black"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><!--[endif]--><span style="color:#993333">int</span><span style="color:black"> send</span><span style="color:#66CC66">(</span><span style="color:black">SOCKET s, </span><span style="color:#993333">const</span><span style="color:black"> </span><span style="color:#993333">char</span><span style="color:black">* buf, </span><span style="color:#993333">int</span><span style="color:black"> len, </span><span style="color:#993333">int</span><span style="color:black"> flags</span><span style="color:#66CC66">)</span><span style="color:black">;<o:p></o:p></span></pre></div>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333"><o:p>&nbsp;</o:p></span></p>

<p style="margin:0cm;margin-bottom:.0001pt;text-align:justify;line-height:13.5pt;
background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;
mso-bidi-font-family:Arial;color:#333333">Os parâmetro que ele recebe também
são iguais ao da função<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">recv()</span></strong>.
O<strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">send()</span></strong><span class="apple-converted-space">&nbsp;</span>retonará o número de bytes enviados,
esse número não será maior do<strong><span style="font-family:Verdana;
mso-bidi-font-family:Arial">len</span></strong><span class="apple-converted-space">&nbsp;</span>(e ele não enviará mais o que o
especificado em<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">len</span></strong>). Se
der um erro ele retornará<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">SOCKET_ERROR</span></strong>.
Use o<span class="apple-converted-space">&nbsp;</span><strong><span style="font-family:Verdana;mso-bidi-font-family:Arial">WSAGetLastError()</span></strong><span class="apple-converted-space">&nbsp;</span>para mais informações.<o:p></o:p></span></p>

<p style="margin-top:0cm;margin-right:0cm;margin-bottom:7.5pt;margin-left:0cm;
text-align:justify;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333">Lembre-se de limpar o buffer de mensagens, senão você irá enviar
"lixo" para o servidor.<o:p></o:p></span></p>

<h4 style="margin:0cm;margin-bottom:.0001pt;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:&quot;Trebuchet MS&quot;;mso-bidi-font-family:Arial;
color:#333333;font-weight:normal">Pronto!<o:p></o:p></span></h4>

<p style="margin-top:0cm;margin-right:0cm;margin-bottom:7.5pt;margin-left:0cm;
text-align:justify;line-height:13.5pt;background:#F3F3F3"><span style="font-size:9.0pt;font-family:Verdana;mso-bidi-font-family:Arial;
color:#333333">Compile os dois programas, depois execute primeiro o servidor
depois o cliente. Se estiver rodando na mesma máquina você pode conectar o
cliente no IP "127.0.0.1" que dará no mesmo.<span class="apple-converted-space">&nbsp;</span><o:p></o:p></span></p>

<p class="MsoNormal"><o:p>&nbsp;</o:p></p>

</div>




</body></html>